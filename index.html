<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Phytolyzer - Crop Doctor</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <header>
    <h1>ðŸŒ± Phytolyzer - Field Identification of Crop Diseases & Pests</h1>
    <input type="text" id="searchBox" placeholder="Search disease or pest..."/>
  </header>

  <main id="results"></main>

  <script>
    async function loadData() {
      const response = await fetch('diseases.json');
      const data = await response.json();
      return data;
    }

    function displayResults(data, query) {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';
      const filtered = data.filter(item =>
        item.name.toLowerCase().includes(query.toLowerCase())
      );
      if (filtered.length === 0) {
        resultsDiv.innerHTML = '<p>No results found</p>';
      } else {
        filtered.forEach(item => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <h2>${item.name}</h2>
            <img src="${item.image}" alt="${item.name}"/>
            <p><strong>Symptoms:</strong> ${item.symptoms}</p>
            <p><strong>Management:</strong> ${item.management}</p>
          `;
          resultsDiv.appendChild(card);
        });
      }
    }

    document.getElementById('searchBox').addEventListener('input', async (e) => {
      const query = e.target.value;
      const data = await loadData();
      displayResults(data, query);
    });

    window.onload = async () => {
      const data = await loadData();
      displayResults(data, '');
    };
  </script>
</body>
</html>
